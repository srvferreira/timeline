<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="/WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">


<ui:define name="conteudo">
<style>
.btnTransferir
{
	color: gray !important;
	size: 12px;
	
	text-decoration: none;
}
.btnTransferir houver
{
	text-decoration: underline !important;
}
</style>
<h:form id="frmGeral" prependId="false">

	<p:accordionPanel>
		<p:tab title="Transferências Pendentes">
		
		 <p:dataTable value="#{principalMB.listaPendentes}" var="p" style="font-size:10px;"
		     emptyMessage="Não existem pendências até o momento">
		 	
		 	<p:column headerText="Protocolo"  style="width: 50px;">
		 		<h:outputText value="#{p.protocolo}"/>
		 	</p:column>
		 	
		 	<p:column headerText="Tombamento"  style="width: 60px;">
		 		<h:outputText value="#{p.cod_bem}"/>
		 	</p:column>
		 	
		 	<p:column headerText="Ctro. Resultado Origem">
		 		<h:outputText value="#{p.ct_resultado_origem}"/>
		 	</p:column>
		 	
		 	<p:column headerText="localização Origem">
		 		<h:outputText value="#{p.localizacao_origem}"/>
		 	</p:column>

		 	<p:column headerText="Responsável Origem">
		 		<h:outputText value="#{p.responsavel_origem}"/>
		 	</p:column>
		 	
		 	<p:column headerText="Ctro. Resultado Destino">
		 		<h:outputText value="#{p.ct_resultado_destino}"/>
		 	</p:column>
		 	
		 	<p:column headerText="Localização Destino">
		 		<h:outputText value="#{p.localizacao_destino}"/>
		 	</p:column>
		 	
		 	<p:column headerText="Responsável Destino">
		 		<h:outputText value="#{p.responsabel_destino}"/>
		 	</p:column>
		 	
		 	<p:column headerText="Responsável Patrimonial">
		 		<h:outputText value="#{p.responsavel_patrimonio}"/>
		 	</p:column>
		 	
		 	<p:column headerText="Data da Transferência">
		 		<h:outputText value="#{p.data_transferencia}">
		 			<f:convertDateTime pattern="dd/MM/yyyy"/>
		 		</h:outputText>
		 	</p:column>
		 </p:dataTable>
		 <br />
		 <h:outputText value="Total de transferências Pendentes #{principalMB.totalTransfPendentes}"/>
		 	<br />
		 <p:link outcome="gtransferir" value="Gerenciar Transferência" styleClass="btnTransferir"/>
		</p:tab>
		
		<p:tab title="Baixas Pendentes">
			
			
			 <p:dataTable value="#{principalMB.listaBaixasPendentes}" var="b" style="font-size:10px;"
			    emptyMessage="Não existem pendências até o momento">
		 	
		 	<p:column headerText="Protocolo"  style="width: 50px;">
		 		<h:outputText value="#{b.protocolo}"/>
		 	</p:column>
		 	
		 	<p:column headerText="Tombamento"  style="width: 60px;">
		 		<h:outputText value="#{b.tombamento}"/>
		 	</p:column>
		 	
		 	<p:column headerText="Centro de Resultado">
		 		<h:outputText value="#{b.ct_resultado}"/>
		 	</p:column>
		 	
		 	<p:column headerText="Localização">
		 		<h:outputText value="#{b.localizacao}"/>
		 	</p:column>
	
		 	<p:column headerText="Responsável">
		 		<h:outputText value="#{p.resp_ct_resultado}"/>
		 	</p:column>
		 	
		 	<p:column headerText="Responsável Patrimonial">
		 		<h:outputText value="#{b.resp_patrimonio}"/>
		 	</p:column>
		 	
		 	<p:column headerText="Data da Solicitação">
		 		<h:outputText value="#{b.data_baixa}">
		 			<f:convertDateTime pattern="dd/MM/yyyy"/>
		 		</h:outputText>
		 	</p:column>
		 </p:dataTable>
		 
		 <br />
		 <h:outputText value="Total de Baixas Pendentes #{principalMB.totalBaixasPendentes}"/>
		 <br />
		 <p:link outcome="gtransferir" value="Gerenciar Transferência" styleClass="btnTransferir"/>
		</p:tab>
		
		<p:tab title="Informações Gerais">
			<p:panelGrid>
			<f:facet name="header">
				<p:row>
                   <p:column colspan="4"><b>Informações Patrimoniais Gerais</b></p:column>
                </p:row>
			</f:facet>
			<p:row>
			<p:column colspan="4">
			<p:dataTable value="#{principalMB.listaInfo}" var="info" style="font-size: 10px; width: 620px;">
				
				<p:column headerText="Conta Contábil" style="width: 80px;">
					<h:outputText value="#{info.contaContabil}"/>
				</p:column>
				
				<p:column headerText="Descrição" style="width: 280px;">
					<h:outputText value="#{info.descricao}"/>
				</p:column>
				
				<p:column headerText="Bens por Conta" style="width: 80px;">
					<h:outputText value="#{info.totalBens}"/>
				</p:column>
				
				<p:column headerText="Valor Bruto Conta" style="width: 100px;">
					<h:outputText value="#{info.valorConta}">
						<f:convertNumber locale="pt_BR" type="currency" currencySymbol="R$"/>
					</h:outputText>
				</p:column>
			</p:dataTable>
			
			</p:column>
			</p:row>
			
				<p:row>
					<p:column>
				<p:outputLabel value="Total de Bens Patrimoniais"/>
				</p:column>
				
				<p:column>
				<h:outputText value="#{principalMB.totalGeralDeBens}"/>
				</p:column>
				
				<p:column>
				<p:outputLabel value="Valor Bruto Patrimonial"/>
				</p:column>
				
				<p:column>
				<h:outputText value="#{principalMB.valorBrutoPatrimonio}">
					<f:convertNumber locale="pt_BR" type="currency" currencySymbol="R$"/>
				</h:outputText>
				</p:column>
				</p:row>
				
				<p:row>
					<p:column>
						<h:outputLabel value="Limite de Bens do Meu Plano"/>
					</p:column>
					
					<p:column>
						<h:outputText value="#{principalMB.limiteBensPlano}"/>
					</p:column>
					
					<p:column>
						<h:outputLabel value="Cadastros Restantes"/>
					</p:column>
					<p:column>
						<h:outputText value="#{principalMB.restanteDeBensParaCadastrar}"/>
					</p:column>
				</p:row>
				
				<p:row rendered="#{principalMB.exibirContatoFerreira}">
					<p:column>
						<h:outputLabel value="Precisa de mais espaço? Entre em contato com a Ferreira &amp; Associados"/>
					</p:column>
				</p:row>
			</p:panelGrid>
		</p:tab>
		
		<p:tab title="Mensagens do Sistema">
			
			<p:dataTable value="#{principalMB.listaMsg}" var="msg" 
			    emptyMessage="Não existem mensagens até o momento" style="width:600px;">
			
				<p:column headerText="Título">
					<h:outputText value="#{msg.titulo}"/>
				</p:column>
				
				<p:column headerText="Data" style="width:60px;">
					<h:outputText value="#{msg.data}">
						<f:convertDateTime pattern="dd/MM/yyyy"/>
					</h:outputText>	
				</p:column>
				
				<p:column style="width:24px;">
					<p:commandButton title="LER" icon="ui-icon-mail-closed" style="width:24px;" 
					                 oncomplete="PF('dlgMsg').show()" update=":frmGeral:dlg">
						<f:setPropertyActionListener target="#{principalMB.lerMsg}" value="#{msg}"/>
					</p:commandButton>
				</p:column>
			</p:dataTable>
		</p:tab>
		
	</p:accordionPanel>
	
	<p:dialog header="Mensagem" widgetVar="dlgMsg" id="dlg" >
		<h:panelGrid columns="1" style="width:600px;">
			
			<h:outputText value="#{principalMB.lerMsg.titulo}" style="font-weight: bold"/>
			
			
			<h:outputText value="#{principalMB.lerMsg.data}">
				<f:convertDateTime pattern="dd/MM/yyyy"/>
			</h:outputText>
			
			
			<h:outputText value="#{principalMB.lerMsg.msg}"/>
		</h:panelGrid>	
	</p:dialog>
</h:form>



</ui:define>
</ui:composition>